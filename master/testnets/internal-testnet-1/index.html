<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Internal Testnet 1 - Anoma - DOCS</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../assets/custom.css">

        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../../quick-start.html"><strong aria-hidden="true">2.</strong> Quick Start</a></li><li class="chapter-item expanded "><a href="../../user-guide/index.html"><strong aria-hidden="true">3.</strong> User Guide</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../user-guide/install.html"><strong aria-hidden="true">3.1.</strong> Install</a></li><li class="chapter-item expanded "><a href="../../user-guide/getting-started.html"><strong aria-hidden="true">3.2.</strong> Getting started</a></li><li class="chapter-item expanded "><a href="../../user-guide/wallet.html"><strong aria-hidden="true">3.3.</strong> The Wallet</a></li><li class="chapter-item expanded "><a href="../../user-guide/ledger.html"><strong aria-hidden="true">3.4.</strong> The Ledger</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../user-guide/ledger/pos.html"><strong aria-hidden="true">3.4.1.</strong> Interact with PoS</a></li><li class="chapter-item expanded "><a href="../../user-guide/ledger/customize.html"><strong aria-hidden="true">3.4.2.</strong> Customize</a></li></ol></li><li class="chapter-item expanded "><a href="../../user-guide/intent-gossiper-and-matchmaker.html"><strong aria-hidden="true">3.5.</strong> The Intent gossiper and Matchmaker</a></li></ol></li><li class="chapter-item expanded "><a href="../../testnets/index.html"><strong aria-hidden="true">4.</strong> Testnets</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../testnets/testnet-launch-procedure/index.html"><strong aria-hidden="true">4.1.</strong> Testnet launch procedure</a></li><li class="chapter-item expanded "><a href="../../testnets/internal-testnet-1/index.html" class="active"><strong aria-hidden="true">4.2.</strong> Internal Testnet 1</a></li></ol></li><li class="chapter-item expanded "><a href="../../explore/index.html"><strong aria-hidden="true">5.</strong> Exploration</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../explore/design/index.html"><strong aria-hidden="true">5.1.</strong> Design</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../explore/design/overview.html"><strong aria-hidden="true">5.1.1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../../explore/design/gossip.html"><strong aria-hidden="true">5.1.2.</strong> Gossip network</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../explore/design/intent_gossip/intent_gossip.html"><strong aria-hidden="true">5.1.2.1.</strong> Intent gossip</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../explore/design/intent_gossip/intent.html"><strong aria-hidden="true">5.1.2.1.1.</strong> Intent</a></li><li class="chapter-item expanded "><a href="../../explore/design/intent_gossip/topic.html"><strong aria-hidden="true">5.1.2.1.2.</strong> Topic</a></li><li class="chapter-item expanded "><a href="../../explore/design/intent_gossip/incentive.html"><strong aria-hidden="true">5.1.2.1.3.</strong> Incentive</a></li><li class="chapter-item expanded "><a href="../../explore/design/intent_gossip/matchmaker.html"><strong aria-hidden="true">5.1.2.1.4.</strong> Matchmaker</a></li><li class="chapter-item expanded "><a href="../../explore/design/intent_gossip/fungible_token.html"><strong aria-hidden="true">5.1.2.1.5.</strong> Fungible token</a></li></ol></li><li class="chapter-item expanded "><a href="../../explore/design/dkg.html"><strong aria-hidden="true">5.1.2.2.</strong> Distributed key generation gossip</a></li></ol></li><li class="chapter-item expanded "><a href="../../explore/design/ledger.html"><strong aria-hidden="true">5.1.3.</strong> The ledger</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../explore/design/ledger/parameters.html"><strong aria-hidden="true">5.1.3.1.</strong> Parameters</a></li><li class="chapter-item expanded "><a href="../../explore/design/ledger/epochs.html"><strong aria-hidden="true">5.1.3.2.</strong> Epochs</a></li><li class="chapter-item expanded "><a href="../../explore/design/ledger/accounts.html"><strong aria-hidden="true">5.1.3.3.</strong> Accounts</a></li><li class="chapter-item expanded "><a href="../../explore/design/ledger/vp.html"><strong aria-hidden="true">5.1.3.4.</strong> Validity predicates</a></li><li class="chapter-item expanded "><a href="../../explore/design/ledger/tx.html"><strong aria-hidden="true">5.1.3.5.</strong> Transactions</a></li><li class="chapter-item expanded "><a href="../../explore/design/ledger/wasm-vm.html"><strong aria-hidden="true">5.1.3.6.</strong> WASM VM</a></li><li class="chapter-item expanded "><a href="../../explore/design/ledger/front-running.html"><strong aria-hidden="true">5.1.3.7.</strong> Front-running prevention</a></li><li class="chapter-item expanded "><a href="../../explore/design/ledger/fractal-scaling.html"><strong aria-hidden="true">5.1.3.8.</strong> Fractal scaling</a></li><li class="chapter-item expanded "><a href="../../explore/design/upgrade-system.html"><strong aria-hidden="true">5.1.3.9.</strong> Upgrade system</a></li><li class="chapter-item expanded "><a href="../../explore/design/ledger/storage.html"><strong aria-hidden="true">5.1.3.10.</strong> Storage</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../explore/design/ledger/storage/data-schema.html"><strong aria-hidden="true">5.1.3.10.1.</strong> Data schema</a></li></ol></li><li class="chapter-item expanded "><a href="../../explore/design/ledger/pos-integration.html"><strong aria-hidden="true">5.1.3.11.</strong> PoS integration</a></li></ol></li><li class="chapter-item expanded "><a href="../../explore/design/crypto-primitives.html"><strong aria-hidden="true">5.1.4.</strong> Crypto primitives</a></li><li class="chapter-item expanded "><a href="../../explore/design/actors.html"><strong aria-hidden="true">5.1.5.</strong> Actors</a></li><li class="chapter-item expanded "><a href="../../explore/design/pos.html"><strong aria-hidden="true">5.1.6.</strong> Proof of Stake system</a></li><li class="chapter-item expanded "><a href="../../explore/design/testnet-setup.html"><strong aria-hidden="true">5.1.7.</strong> Testnet setup</a></li></ol></li><li class="chapter-item expanded "><a href="../../explore/prototypes/index.html"><strong aria-hidden="true">5.2.</strong> Prototypes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../explore/prototypes/base-ledger.html"><strong aria-hidden="true">5.2.1.</strong> Base ledger</a></li><li class="chapter-item expanded "><a href="../../explore/prototypes/gossip-layer.html"><strong aria-hidden="true">5.2.2.</strong> Gossip layer</a></li></ol></li><li class="chapter-item expanded "><a href="../../explore/libraries/index.html"><strong aria-hidden="true">5.3.</strong> Libraries &amp; Tools</a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.3.1.</strong> Cryptography</div></li><li class="chapter-item expanded "><a href="../../explore/libraries/network.html"><strong aria-hidden="true">5.3.2.</strong> network</a></li><li class="chapter-item expanded "><a href="../../explore/libraries/cli.html"><strong aria-hidden="true">5.3.3.</strong> Command-line interface</a></li><li class="chapter-item expanded "><a href="../../explore/libraries/db.html"><strong aria-hidden="true">5.3.4.</strong> Database</a></li><li class="chapter-item expanded "><a href="../../explore/libraries/logging.html"><strong aria-hidden="true">5.3.5.</strong> Logging</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.3.6.</strong> Networking</div></li><li class="chapter-item expanded "><a href="../../explore/libraries/packaging.html"><strong aria-hidden="true">5.3.7.</strong> Packaging</a></li><li class="chapter-item expanded "><a href="../../explore/libraries/serialization.html"><strong aria-hidden="true">5.3.8.</strong> Serialization</a></li><li class="chapter-item expanded "><a href="../../explore/libraries/wasm.html"><strong aria-hidden="true">5.3.9.</strong> WASM runtime</a></li><li class="chapter-item expanded "><a href="../../explore/libraries/errors.html"><strong aria-hidden="true">5.3.10.</strong> Error handling</a></li></ol></li><li class="chapter-item expanded "><a href="../../explore/design/glossary.html"><strong aria-hidden="true">5.4.</strong> Glossary</a></li><li class="chapter-item expanded "><a href="../../explore/resources/index.html"><strong aria-hidden="true">5.5.</strong> Resources</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../explore/resources/ide.html"><strong aria-hidden="true">5.5.1.</strong> IDE</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../specs/index.html"><strong aria-hidden="true">6.</strong> Specifications</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../specs/overview.html"><strong aria-hidden="true">6.1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../../specs/ledger.html"><strong aria-hidden="true">6.2.</strong> The ledger</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../specs/ledger/rpc.html"><strong aria-hidden="true">6.2.1.</strong> RPC</a></li><li class="chapter-item expanded "><a href="../../specs/ledger/default-transactions.html"><strong aria-hidden="true">6.2.2.</strong> Default transactions</a></li><li class="chapter-item expanded "><a href="../../specs/ledger/default-validity-predicates.html"><strong aria-hidden="true">6.2.3.</strong> Default validity predicates</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.3.</strong> Trade system</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.4.</strong> Intent gossip system</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.5.</strong> Fractal scaling</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.6.</strong> Upgrade system</div></li><li class="chapter-item expanded "><a href="../../specs/crypto.html"><strong aria-hidden="true">6.7.</strong> Crypto</a></li><li class="chapter-item expanded "><a href="../../specs/encoding.html"><strong aria-hidden="true">6.8.</strong> Encoding</a></li></ol></li><li class="chapter-item expanded "><a href="../../archive/index.html"><strong aria-hidden="true">7.</strong> Archive</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../archive/domain-name-addresses.html"><strong aria-hidden="true">7.1.</strong> Domain name addresses</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Anoma - DOCS</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/anoma/anoma" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/anoma/anoma/edit/master/docs/src/testnets/internal-testnet-1/README.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="internal-testnet-1"><a class="header" href="#internal-testnet-1">Internal Testnet 1</a></h1>
<p><em>Last updated on <strong>3/30/2022</strong> by <strong>Alexandre Roque</strong></em></p>
<p>Current chain id <code>anoma-masp-0.3.51d2f83a8412b95</code> and branch
<code>internal/testnet-n1</code> (commit
<code>0184e64e044366ec370d1431ddf4691b4bd3a5b4</code>)</p>
<h2 id="run-masp-testnet"><a class="header" href="#run-masp-testnet">Run MASP Testnet</a></h2>
<p><strong>NOTE</strong> Check the <a href="#prerequisites">prerequisities</a> before trying to start a node from binaries.</p>
<ul>
<li>Download <code>masp-params.tar.gz</code> and <code>anoma-v0.5.0-49-g0184e64e0-Linux-x86_64.tar.gz</code> <a href="https://drive.google.com/drive/folders/1MM-HOkxDgcbgKbTn8E2xVHVKPhiKBI9C?usp=sharing">from Google Drive</a></li>
<li>Extract masp params file <code>masp-params.tar.gz</code>
<ul>
<li>Linux: into home dir as follow <code>~/.masp-params</code></li>
<li>Mac OS: into <code>~/Library/Application Support/MASPParams</code></li>
</ul>
</li>
<li>Extract anoma file with prebuilt binaries <code>anoma-v0.5.0-49-g0184e64e0-Linux-x86_64.tar.gz</code></li>
<li>Go to anoma folder <code>anoma-v0.5.0-49-g0184e64e0-Linux-x86_64</code></li>
<li>Join chain-id <code>anoma-masp-0.3.51d2f83a8412b95</code> and start your node</li>
</ul>
<p>Executing the commands below should start a node:</p>
<pre><code class="language-bash">cd ~ 
tar -xvf masp-params.tar.gz
tar -xvf anoma-v0.5.0-49-g0184e64e0-Linux-x86_64.tar.gz
cd anoma-v0.5.0-49-g0184e64e0-Linux-x86_64
./anomac utils join-network --chain-id anoma-masp-0.3.51d2f83a8412b95
./anoma ledger
</code></pre>
<h2 id="using-shielded-transfers"><a class="header" href="#using-shielded-transfers">Using shielded transfers</a></h2>
<p>Shielded balances are owned by a particular spending key. In this
testnet, spending keys are just arbitrary hexadecimal strings, provided
on the command line.</p>
<p>To try out shielded transfers, you will first need an ordinary
transparent account with some token balance. Example commands for that:</p>
<pre><code>./anomaw address gen --alias my-implicit
./anomac init-account --source my-implicit --public-key my-implicit --alias my-established
./anomac transfer --token btc --amount 1000 --source faucet --target my-established --signer my-established
</code></pre>
<p>The testnet tokens which the faucet can provide you are named <code>XAN</code>,
<code>BTC</code>, <code>ETH</code>, <code>DOT</code>, <code>Schnitzel</code>, <code>Apfel</code>, and <code>Kartoffel</code>. The faucet
will transfer these in increments of 1000 at a time.</p>
<p>Once you have an ordinary transparent account with some tokens, you
should select a spending key to hold your shielded balances. This is
just some hexadecimal string, like <code>1234</code>, <code>abcd</code>, or
<code>030cdcc0a43765d4645e22adbf9944b58c646d162c9a08890a08cc49a9580c9e</code>. Try
to select one that is unique to you (i.e., probably don't use <code>1234</code>);
you could randomly generate one with e.g. <code>openssl rand -hex 32</code>. The
wallet does not yet support spending keys, so make a note of yours
somewhere.</p>
<p>Shielded transfers work with the <code>anomac transfer</code> command, but either
<code>--source</code>, <code>--target</code>, or both are replaced. <code>--source</code> may be replaced
with <code>--spending-key</code> to spend a shielded balance, but if you are
following along, you don't have a shielded balance to spend yet.
<code>--target</code> may be replaced with <code>--payment-address</code> to create a shielded
balance.</p>
<p>To create a payment address from your spending key, use:</p>
<pre><code>./anomaw masp gen-payment-addr --spending-key [your spending key]
</code></pre>
<p>This will generate a different payment address each time you run it.
Payment addresses can be reused or discarded as you like, and can't be
correlated with one another.</p>
<p>Once you have a payment address, transfer a balance from your
transparent account to your shielded spending key with something like:</p>
<pre><code>anomac transfer --source my-established --payment-address [your payment address] --token btc --amount 100
</code></pre>
<p>Once this transfer goes through, you can view your spending key's
balance:</p>
<pre><code>anomac balance --spending-key [your spending key]
</code></pre>
<p>However, your spending key is the secret key to all your shielded
balances, and you may not want to use it just to view balances. For this
purpose, you can derive the viewing key:</p>
<pre><code>./anomaw masp derive-view-key --spending-key [your spending key]
./anomac balance --viewing-key [your viewing key]
</code></pre>
<p>The viewing key can also be used to generate payment addresses, with
e.g. <code>./anomaw masp gen-payment-addr --viewing-key [your viewing key]</code>.</p>
<p>Now that you have a shielded balance, it can either be transferred to a
different shielded payment address (shielded to shielded):</p>
<pre><code>./anomac transfer --spending-key [your spending key] --payment-address [someone's payment address] --token btc --amount 50 --signer my-established
</code></pre>
<p>or to a transparent account (shielded to transparent):</p>
<pre><code>./anomac transfer --spending-key [your spending key] --target [some transparent account] --token btc --amount 50 --signer my-established
</code></pre>
<p>Note that for both of these types of transfer, <code>--signer</code> must be
specified. However, any transparent account can sign these transactions.</p>
<h2 id="hardware-requirements"><a class="header" href="#hardware-requirements">Hardware Requirements</a></h2>
<p>This section covers the minimum and recommended hardware requirements for engaging with the Namada as a validator node.</p>
<h3 id="minimal-hardware-requirements"><a class="header" href="#minimal-hardware-requirements">Minimal Hardware Requirements</a></h3>
<table><thead><tr><th>Hardware</th><th>Minimal Specifications</th></tr></thead><tbody>
<tr><td>CPU</td><td>x86_64 (Intel, AMD) processor with at least 4 physical cores</td></tr>
<tr><td>RAM</td><td>16GB DDR4</td></tr>
<tr><td>Storage</td><td>at least 60GB SSD (NVMe SSD is recommended. HDD will be enough for localnet only)</td></tr>
</tbody></table>
<h2 id="run-a-node-from-prebuilt-binaries"><a class="header" href="#run-a-node-from-prebuilt-binaries">Run a Node from Prebuilt Binaries</a></h2>
<p>This is a quickstart guide to install and run Anoma. If you want to install Anoma from Source, Docker or Nix check section <a href="https://docs.anoma.network/v0.5.0/user-guide/install.html">Install Anoma</a> and then come back to this section to run your node.</p>
<h3 id="install-anoma"><a class="header" href="#install-anoma">Install Anoma</a></h3>
<h4 id="from-prebuilt-binaries"><a class="header" href="#from-prebuilt-binaries">From Prebuilt Binaries</a></h4>
<h5 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h5>
<ul>
<li><a href="https://www.rust-lang.org/tools/install">Rust</a></li>
<li><a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">Git</a></li>
<li>Tendermint 0.34.x pre-installed:
<ul>
<li><a href="https://github.com/tendermint/tendermint/releases">Download any of the pre-built binaries for versions 0.34.x</a> and install it using the instructions on the <a href="https://docs.tendermint.com/master/introduction/install.html">Tendermint guide</a></li>
<li>or use the script from the Anoma repo <a href="https://github.com/anoma/anoma/blob/master/scripts/install/get_tendermint.sh"><code>scripts/install/get_tendermint.sh</code></a>. This is used by the make install command (if you’re installing from the source).</li>
</ul>
</li>
<li>GLIBC v2.29 or higher
<ul>
<li>On Ubuntu, you can check your glibc version with <code>ldd --version</code></li>
<li>By default, the highest version of GLIBC for Ubuntu 18.04 should be 2.27. The best way to go for Ubuntu 18.04 is to build from source, but if you still want to upgrade to a higher version then follow one of the following points:
<ul>
<li>The second option is to migrate your application to a system that supports GLIBC higher than or equal to 2.29. This would mean a lot of work though. It seems Ubuntu 19.04 actually uses that version.</li>
<li>The thired option would be to actually build your GLIBC from source using the version you want or need. I’ve researched it a bit and found a website which actually gives you the steps for you to build the package from source : <a href="http://www.linuxfromscratch.org/lfs/view/9.0-systemd/chapter05/glibc.html">http://www.linuxfromscratch.org/lfs/view/9.0-systemd/chapter05/glibc.html</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h6 id="optional-prerequisites"><a class="header" href="#optional-prerequisites">Optional prerequisites</a></h6>
<ul>
<li><a href="https://github.com/tmux/tmux/wiki/Installing">Tmux</a> Terminal Multiplexer (to keep the node running in the background)</li>
</ul>
<p><em>Note: we don't support Windows at this point in time.</em></p>
<ul>
<li>Open your favorite Terminal</li>
<li>Install the <a href="https://github.com/anoma/anoma/releases/tag/v0.3.1">Anoma release v0.3.1</a> on your machine by running:</li>
</ul>
<p><strong>Linux</strong></p>
<pre><code class="language-bash">curl -LO https://github.com/anoma/anoma/releases/download/v0.3.1/anoma-v0.3.1-Linux-x86_64.tar.gz
tar -xzf anoma-v0.3.1-Linux-x86_64.tar.gz
cd anoma-v0.3.1-Linux-x86_64
</code></pre>
<p><strong>MacOS</strong></p>
<pre><code class="language-bash">curl -LO https://github.com/anoma/anoma/releases/download/v0.3.1/anoma-v0.3.1-Darwin-x86_64.tar.gz
tar -xzf anoma-v0.3.1-Darwin-x86_64.tar.gz
cd anoma-v0.3.1-Darwin-x86_64
</code></pre>
<h4 id="from-source"><a class="header" href="#from-source">From Source</a></h4>
<h5 id="prerequisites-1"><a class="header" href="#prerequisites-1">Prerequisites</a></h5>
<p>To build from source you will have to install some dependencies:</p>
<ul>
<li><a href="https://www.rust-lang.org/tools/install">Rust</a></li>
<li><a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">Git</a></li>
<li>Clang</li>
<li>OpenSSL</li>
<li>LLVM</li>
</ul>
<p>For ubuntu users, the following command should install everything necessary:</p>
<pre><code>curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
sudo apt-get install -y make git-core libssl-dev pkg-config libclang-12-dev
</code></pre>
<p>Clone the source code from the <a href="https://github.com/anoma/anoma">Github Anoma repo</a>, then build and install anoma with the following commands:</p>
<pre><code>git clone https://github.com/anoma/anoma.git --single-branch --branch internal/testnet-n1
cd anoma
make install
</code></pre>
<h3 id="run-anoma"><a class="header" href="#run-anoma">Run Anoma</a></h3>
<ul>
<li>Configure your node to join a network:</li>
</ul>
<pre><code>./anomac utils join-network --chain-id=anoma-masp-0.3.51d2f83a8412b95
</code></pre>
<p>This should output the following:</p>
<pre><code>Downloading config release from https://github.com/heliaxdev/anoma-network-config/releases/download/anoma-masp-0.3.51d2f83a8412b95/anoma-masp-0.3.51d2f83a8412b95.tar.gz ...
Successfully configured for chain ID anoma-masp-0.3.51d2f83a8412b95
</code></pre>
<ul>
<li>Run the ledger into a tmux session:</li>
</ul>
<pre><code>tmux new -s anoma
./anoma ledger
</code></pre>
<p>Detach from the anoma tmux session by pressing <code>Ctrl-B then D</code>.
Attach again to your anoma tmux session by running:</p>
<pre><code>tmux a -t anoma
</code></pre>
<h3 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h3>
<h4 id="build-from-source"><a class="header" href="#build-from-source">Build from Source</a></h4>
<p>This is required to build the wasm validity predicates.</p>
<pre><code>rustup target add wasm32-unknown-unknown
</code></pre>
<p>Build the provided validity predicate, transaction and matchmaker wasm modules</p>
<pre><code>make build-wasm-scripts-docker
</code></pre>
<h4 id="node-is-not-starting"><a class="header" href="#node-is-not-starting">Node is not starting</a></h4>
<p><strong>No state could be found</strong>
If you get the following log, it means that tendermint is not installed properly on your machine. To solve this issue follow the <a href="#prerequisites">prerequisites</a>.</p>
<pre><code class="language-bash">2022-03-30T07:21:09.212187Z  INFO anoma_apps::cli::context: Chain ID: anoma-masp-0.3.51d2f83a8412b95
2022-03-30T07:21:09.213968Z  INFO anoma_apps::node::ledger: Available logical cores: 8
2022-03-30T07:21:09.213989Z  INFO anoma_apps::node::ledger: Using 4 threads for Rayon.
2022-03-30T07:21:09.213994Z  INFO anoma_apps::node::ledger: Using 4 threads for Tokio.
2022-03-30T07:21:09.217867Z  INFO anoma_apps::node::ledger: VP WASM compilation cache size not configured, using 1/6 of available memory.
2022-03-30T07:21:09.218908Z  INFO anoma_apps::node::ledger: Available memory: 15.18 GiB
2022-03-30T07:21:09.218934Z  INFO anoma_apps::node::ledger: VP WASM compilation cache size: 2.53 GiB
2022-03-30T07:21:09.218943Z  INFO anoma_apps::node::ledger: Tx WASM compilation cache size not configured, using 1/6 of available memory.
2022-03-30T07:21:09.218947Z  INFO anoma_apps::node::ledger: Tx WASM compilation cache size: 2.53 GiB
2022-03-30T07:21:09.218954Z  INFO anoma_apps::node::ledger: Block cache size not configured, using 1/3 of available memory.
2022-03-30T07:21:09.218959Z  INFO anoma_apps::node::ledger: RocksDB block cache size: 5.06 GiB
2022-03-30T07:21:09.218996Z  INFO anoma_apps::node::ledger::storage::rocksdb: Using 2 compactions threads for RocksDB.
2022-03-30T07:21:09.219196Z  INFO anoma_apps::node::ledger: Tendermint node is no longer running.
2022-03-30T07:21:09.232544Z  INFO anoma::ledger::storage: No state could be found
2022-03-30T07:21:09.232709Z  INFO anoma_apps::node::ledger: Tendermint has exited, shutting down...
2022-03-30T07:21:09.232794Z  INFO anoma_apps::node::ledger: Anoma ledger node started.
2022-03-30T07:21:09.232849Z  INFO anoma_apps::node::ledger: Anoma ledger node has shut down.
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../testnets/testnet-launch-procedure/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../explore/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../testnets/testnet-launch-procedure/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../explore/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="../../assets/mermaid.min.js"></script>
        <script type="text/javascript" src="../../assets/mermaid-init.js"></script>


    </body>
</html>
