<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Virtual machine’s host environment exposes functions that may be called from within a virtual machine."><meta name="keywords" content="rust, rustlang, rust-lang, host_env"><title>anoma::vm::host_env - Rust</title><link rel="stylesheet" type="text/css" href="../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../../ayu.css" disabled ><script id="default-settings" ></script><script src="../../../storage.js"></script><script src="../../../crates.js"></script><script defer src="../../../main.js"></script>
    <noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="shortcut icon" href="https:&#x2F;&#x2F;docs.anoma.network&#x2F;favicon.png"><style type="text/css">#crate-search{background-image:url("../../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../../anoma/index.html'><div class='logo-container rust-logo'><img src='https:&#x2F;&#x2F;docs.anoma.network&#x2F;rustdoc-logo.png' alt='logo'></div></a><h2 class="location">Module host_env</h2><div class="sidebar-elems"><div class="block items"><ul><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li></ul></div><div id="sidebar-vars" data-name="host_env" data-ty="mod" data-relpath="./"></div><script defer src="./sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../../index.html">anoma</a>::<wbr><a href="../index.html">vm</a>::<wbr><a class="mod" href="#">host_env</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../../src/anoma/vm/host_env.rs.html#1-1834" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Virtual machine’s host environment exposes functions that may be called from
within a virtual machine.</p>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="testing/index.html" title="anoma::vm::host_env::testing mod">testing</a></div><div class="item-right docblock-short"><p>A helper module for testing</p>
</div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.TxCtx.html" title="anoma::vm::host_env::TxCtx struct">TxCtx</a></div><div class="item-right docblock-short"><p>A transaction’s host context</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.TxEnv.html" title="anoma::vm::host_env::TxEnv struct">TxEnv</a></div><div class="item-right docblock-short"><p>A transaction’s host environment</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.VpCtx.html" title="anoma::vm::host_env::VpCtx struct">VpCtx</a></div><div class="item-right docblock-short"><p>A validity predicate’s host context</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.VpEnv.html" title="anoma::vm::host_env::VpEnv struct">VpEnv</a></div><div class="item-right docblock-short"><p>A validity predicate’s host environment</p>
</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.TxRuntimeError.html" title="anoma::vm::host_env::TxRuntimeError enum">TxRuntimeError</a></div><div class="item-right docblock-short"><p>These runtime errors will abort tx WASM execution immediately</p>
</div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.VpEvaluator.html" title="anoma::vm::host_env::VpEvaluator trait">VpEvaluator</a></div><div class="item-right docblock-short"><p>A Validity predicate runner for calls from the <a href="fn.vp_eval.html" title="vp_eval"><code>vp_eval</code></a> function.</p>
</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tx_add_gas.html" title="anoma::vm::host_env::tx_add_gas fn">tx_add_gas</a></div><div class="item-right docblock-short"><p>Add a gas cost incured in a transaction</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tx_charge_gas.html" title="anoma::vm::host_env::tx_charge_gas fn">tx_charge_gas</a></div><div class="item-right docblock-short"><p>Called from tx wasm to request to use the given gas amount</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tx_delete.html" title="anoma::vm::host_env::tx_delete fn">tx_delete</a></div><div class="item-right docblock-short"><p>Storage delete function exposed to the wasm VM Tx environment. The given
key/value will be written as deleted to the write log.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tx_emit_ibc_event.html" title="anoma::vm::host_env::tx_emit_ibc_event fn">tx_emit_ibc_event</a></div><div class="item-right docblock-short"><p>Emitting an IBC event function exposed to the wasm VM Tx environment.
The given IBC event will be set to the write log.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tx_get_block_epoch.html" title="anoma::vm::host_env::tx_get_block_epoch fn">tx_get_block_epoch</a></div><div class="item-right docblock-short"><p>Getting the block epoch function exposed to the wasm VM Tx
environment. The epoch is that of the block to which the current
transaction is being applied.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tx_get_block_hash.html" title="anoma::vm::host_env::tx_get_block_hash fn">tx_get_block_hash</a></div><div class="item-right docblock-short"><p>Getting the block hash function exposed to the wasm VM Tx environment. The
hash is that of the block to which the current transaction is being applied.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tx_get_block_height.html" title="anoma::vm::host_env::tx_get_block_height fn">tx_get_block_height</a></div><div class="item-right docblock-short"><p>Getting the block height function exposed to the wasm VM Tx
environment. The height is that of the block to which the current
transaction is being applied.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tx_get_block_time.html" title="anoma::vm::host_env::tx_get_block_time fn">tx_get_block_time</a></div><div class="item-right docblock-short"><p>Getting the block time function exposed to the wasm VM Tx
environment. The time is that of the block header to which the current
transaction is being applied.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tx_get_chain_id.html" title="anoma::vm::host_env::tx_get_chain_id fn">tx_get_chain_id</a></div><div class="item-right docblock-short"><p>Getting the chain ID function exposed to the wasm VM Tx environment.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tx_has_key.html" title="anoma::vm::host_env::tx_has_key fn">tx_has_key</a></div><div class="item-right docblock-short"><p>Storage <code>has_key</code> function exposed to the wasm VM Tx environment. It will
try to check the write log first and if no entry found then the storage.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tx_init_account.html" title="anoma::vm::host_env::tx_init_account fn">tx_init_account</a></div><div class="item-right docblock-short"><p>Initialize a new account established address.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tx_insert_verifier.html" title="anoma::vm::host_env::tx_insert_verifier fn">tx_insert_verifier</a></div><div class="item-right docblock-short"><p>Verifier insertion function exposed to the wasm VM Tx environment.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tx_iter_next.html" title="anoma::vm::host_env::tx_iter_next fn">tx_iter_next</a></div><div class="item-right docblock-short"><p>Storage prefix iterator next function exposed to the wasm VM Tx environment.
It will try to read from the write log first and if no entry found then from
the storage.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tx_iter_prefix.html" title="anoma::vm::host_env::tx_iter_prefix fn">tx_iter_prefix</a></div><div class="item-right docblock-short"><p>Storage prefix iterator function exposed to the wasm VM Tx environment.
It will try to get an iterator from the storage and return the corresponding
ID of the iterator.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tx_log_string.html" title="anoma::vm::host_env::tx_log_string fn">tx_log_string</a></div><div class="item-right docblock-short"><p>Log a string from exposed to the wasm VM Tx environment. The message will be
printed at the <a href="https://docs.rs/tracing-core/0.1.22/tracing_core/metadata/struct.Level.html#associatedconstant.INFO" title="tracing::Level::INFO"><code>tracing::Level::INFO</code></a>. This function is for development
only.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tx_read.html" title="anoma::vm::host_env::tx_read fn">tx_read</a></div><div class="item-right docblock-short"><p>Storage read function exposed to the wasm VM Tx environment. It will try to
read from the write log first and if no entry found then from the storage.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tx_result_buffer.html" title="anoma::vm::host_env::tx_result_buffer fn">tx_result_buffer</a></div><div class="item-right docblock-short"><p>This function is a helper to handle the first step of reading var-len
values from the host.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tx_update_validity_predicate.html" title="anoma::vm::host_env::tx_update_validity_predicate fn">tx_update_validity_predicate</a></div><div class="item-right docblock-short"><p>Update a validity predicate function exposed to the wasm VM Tx environment</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tx_write.html" title="anoma::vm::host_env::tx_write fn">tx_write</a></div><div class="item-right docblock-short"><p>Storage write function exposed to the wasm VM Tx environment. The given
key/value will be written to the write log.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tx_write_temp.html" title="anoma::vm::host_env::tx_write_temp fn">tx_write_temp</a></div><div class="item-right docblock-short"><p>Temporary storage write function exposed to the wasm VM Tx environment. The
given key/value will be written only to the write log. It will be never
written to the storage.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.vp_charge_gas.html" title="anoma::vm::host_env::vp_charge_gas fn">vp_charge_gas</a></div><div class="item-right docblock-short"><p>Called from VP wasm to request to use the given gas amount</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.vp_eval.html" title="anoma::vm::host_env::vp_eval fn">vp_eval</a></div><div class="item-right docblock-short"><p>Evaluate a validity predicate with the given input data.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.vp_get_block_epoch.html" title="anoma::vm::host_env::vp_get_block_epoch fn">vp_get_block_epoch</a></div><div class="item-right docblock-short"><p>Getting the block epoch function exposed to the wasm VM VP
environment. The epoch is that of the block to which the current
transaction is being applied.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.vp_get_block_hash.html" title="anoma::vm::host_env::vp_get_block_hash fn">vp_get_block_hash</a></div><div class="item-right docblock-short"><p>Getting the block hash function exposed to the wasm VM VP environment. The
hash is that of the block to which the current transaction is being applied.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.vp_get_block_height.html" title="anoma::vm::host_env::vp_get_block_height fn">vp_get_block_height</a></div><div class="item-right docblock-short"><p>Getting the block height function exposed to the wasm VM VP
environment. The height is that of the block to which the current
transaction is being applied.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.vp_get_chain_id.html" title="anoma::vm::host_env::vp_get_chain_id fn">vp_get_chain_id</a></div><div class="item-right docblock-short"><p>Getting the chain ID function exposed to the wasm VM VP environment.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.vp_get_tx_code_hash.html" title="anoma::vm::host_env::vp_get_tx_code_hash fn">vp_get_tx_code_hash</a></div><div class="item-right docblock-short"><p>Getting the transaction hash function exposed to the wasm VM VP environment.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.vp_has_key_post.html" title="anoma::vm::host_env::vp_has_key_post fn">vp_has_key_post</a></div><div class="item-right docblock-short"><p>Storage <code>has_key</code> in posterior state (after tx execution) function exposed
to the wasm VM VP environment. It will try to check the write log first and
if no entry found then the storage.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.vp_has_key_pre.html" title="anoma::vm::host_env::vp_has_key_pre fn">vp_has_key_pre</a></div><div class="item-right docblock-short"><p>Storage <code>has_key</code> in prior state (before tx execution) function exposed to
the wasm VM VP environment. It will try to read from the storage.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.vp_iter_post_next.html" title="anoma::vm::host_env::vp_iter_post_next fn">vp_iter_post_next</a></div><div class="item-right docblock-short"><p>Storage prefix iterator next for posterior state (after tx execution)
function exposed to the wasm VM VP environment. It will try to read from the
write log first and if no entry found then from the storage.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.vp_iter_pre_next.html" title="anoma::vm::host_env::vp_iter_pre_next fn">vp_iter_pre_next</a></div><div class="item-right docblock-short"><p>Storage prefix iterator for prior state (before tx execution) function
exposed to the wasm VM VP environment. It will try to read from the storage.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.vp_iter_prefix.html" title="anoma::vm::host_env::vp_iter_prefix fn">vp_iter_prefix</a></div><div class="item-right docblock-short"><p>Storage prefix iterator function exposed to the wasm VM VP environment.
It will try to get an iterator from the storage and return the corresponding
ID of the iterator.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.vp_log_string.html" title="anoma::vm::host_env::vp_log_string fn">vp_log_string</a></div><div class="item-right docblock-short"><p>Log a string from exposed to the wasm VM VP environment. The message will be
printed at the <a href="https://docs.rs/tracing-core/0.1.22/tracing_core/metadata/struct.Level.html#associatedconstant.INFO" title="tracing::Level::INFO"><code>tracing::Level::INFO</code></a>. This function is for development
only.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.vp_read_post.html" title="anoma::vm::host_env::vp_read_post fn">vp_read_post</a></div><div class="item-right docblock-short"><p>Storage read posterior state (after tx execution) function exposed to the
wasm VM VP environment. It will try to read from the write log first and if
no entry found then from the storage.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.vp_read_pre.html" title="anoma::vm::host_env::vp_read_pre fn">vp_read_pre</a></div><div class="item-right docblock-short"><p>Storage read prior state (before tx execution) function exposed to the wasm
VM VP environment. It will try to read from the storage.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.vp_read_temp.html" title="anoma::vm::host_env::vp_read_temp fn">vp_read_temp</a></div><div class="item-right docblock-short"><p>Storage read temporary state (after tx execution) function exposed to the
wasm VM VP environment. It will try to read from only the write log.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.vp_result_buffer.html" title="anoma::vm::host_env::vp_result_buffer fn">vp_result_buffer</a></div><div class="item-right docblock-short"><p>This function is a helper to handle the first step of reading var-len
values from the host.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.vp_verify_tx_signature.html" title="anoma::vm::host_env::vp_verify_tx_signature fn">vp_verify_tx_signature</a></div><div class="item-right docblock-short"><p>Verify a transaction signature.</p>
</div></div></div></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../../" data-current-crate="anoma" data-search-index-js="../../../search-index.js" data-search-js="../../../search.js"></div>
</body></html>