<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Determines the type of the input Tx"><meta name="keywords" content="rust, rustlang, rust-lang, process_tx"><title>process_tx in anoma_vp_prelude::transaction::tx_types - Rust</title><link rel="stylesheet" type="text/css" href="../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../../ayu.css" disabled ><script id="default-settings" ></script><script src="../../../storage.js"></script><script src="../../../crates.js"></script><script defer src="../../../main.js"></script>
    <noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="shortcut icon" href="https:&#x2F;&#x2F;dev.anoma.net&#x2F;master&#x2F;favicon.png"><style type="text/css">#crate-search{background-image:url("../../../down-arrow.svg");}</style></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../../anoma_vp_prelude/index.html'><div class='logo-container rust-logo'><img src='https:&#x2F;&#x2F;dev.anoma.net&#x2F;master&#x2F;rustdoc-logo.png' alt='logo'></div></a><div class="sidebar-elems"><h2 class="location">Other items in<br><a href="../../index.html">anoma_vp_prelude</a>::<wbr><a href="../index.html">transaction</a>::<wbr><a href="index.html">tx_types</a></h2><div id="sidebar-vars" data-name="process_tx" data-ty="fn" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Function <a href="../../index.html">anoma_vp_prelude</a>::<wbr><a href="../index.html">transaction</a>::<wbr><a href="index.html">tx_types</a>::<wbr><a class="fn" href="#">process_tx</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../../src/anoma/types/transaction/mod.rs.html#289" title="goto source code">[src]</a></span></h1><div class="docblock item-decl"><pre class="rust fn"><code>pub fn process_tx(tx: <a class="struct" href="../../../anoma/proto/types/struct.Tx.html" title="struct anoma::proto::types::Tx">Tx</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.58.1/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="enum" href="../enum.TxType.html" title="enum anoma_vp_prelude::transaction::TxType">TxType</a>, <a class="enum" href="../enum.TxError.html" title="enum anoma_vp_prelude::transaction::TxError">TxError</a>&gt;</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Determines the type of the input Tx</p>
<p>If it is a raw Tx, signed or not, the Tx is
returned unchanged inside an enum variant stating its type.</p>
<p>If it is a decrypted tx, signing it adds no security so we
extract the signed data without checking the signature (if it
is signed) or return as is. Either way, it is returned in
an enum variant stating its type.</p>
<p>If it is a WrapperTx, we extract the signed data of
the Tx and verify it is of the appropriate form. This means</p>
<ol>
<li>The signed Tx data deserializes to a WrapperTx type</li>
<li>The wrapper tx is indeed signed</li>
<li>The signature is valid</li>
</ol>
<p>We modify the data of the WrapperTx to contain only the signed
data if valid and return it wrapped in a enum variant
indicating it is a wrapper. Otherwise, an error is
returned indicating the signature was not valid</p>
</div></details></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../../" data-current-crate="anoma_vp_prelude" data-search-index-js="../../../search-index.js" data-search-js="../../../search.js"></div>
</body></html>