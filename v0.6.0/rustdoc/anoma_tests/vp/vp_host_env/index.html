<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This module combines the native host function implementations from `native_vp_host_env` with the functions exposed to the vp wasm that will call to the native functions, instead of interfacing via a wasm runtime. It can be used for host environment integration tests."><meta name="keywords" content="rust, rustlang, rust-lang, vp_host_env"><title>anoma_tests::vp::vp_host_env - Rust</title><link rel="stylesheet" type="text/css" href="../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../../ayu.css" disabled ><script id="default-settings" ></script><script src="../../../storage.js"></script><script src="../../../crates.js"></script><script defer src="../../../main.js"></script>
    <noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="shortcut icon" href="https:&#x2F;&#x2F;dev.anoma.net&#x2F;master&#x2F;favicon.png"><style type="text/css">#crate-search{background-image:url("../../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../../anoma_tests/index.html'><div class='logo-container rust-logo'><img src='https:&#x2F;&#x2F;dev.anoma.net&#x2F;master&#x2F;rustdoc-logo.png' alt='logo'></div></a><h2 class="location">Module vp_host_env</h2><div class="sidebar-elems"><div class="block items"><ul><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></div><div id="sidebar-vars" data-name="vp_host_env" data-ty="mod" data-relpath="./"></div><script defer src="./sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../../index.html">anoma_tests</a>::<wbr><a href="../index.html">vp</a>::<wbr><a class="mod" href="#">vp_host_env</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../../src/anoma_tests/vm_host_env/vp.rs.html#21-25" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This module combines the native host function implementations from
<code>native_vp_host_env</code> with the functions exposed to the vp wasm
that will call to the native functions, instead of interfacing via a
wasm runtime. It can be used for host environment integration tests.</p>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="address/index.html" title="anoma_tests::vp::vp_host_env::address mod">address</a></div><div class="item-right docblock-short"><p>Implements transparent addresses as described in <a href="docs/src/explore/design/ledger/accounts.md#addresses">Accounts
Addresses</a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="chain/index.html" title="anoma_tests::vp::vp_host_env::chain mod">chain</a></div><div class="item-right docblock-short"><p>Chain related data types</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="dylib/index.html" title="anoma_tests::vp::vp_host_env::dylib mod">dylib</a></div><div class="item-right docblock-short"><p>Dynamic library helpers</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="gov_storage/index.html" title="anoma_tests::vp::vp_host_env::gov_storage mod">gov_storage</a></div><div class="item-right docblock-short"><p>governance storage</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="governance/index.html" title="anoma_tests::vp::vp_host_env::governance mod">governance</a></div><div class="item-right docblock-short"><p>Files defyining the types used in governance.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="hash/index.html" title="anoma_tests::vp::vp_host_env::hash mod">hash</a></div><div class="item-right docblock-short"><p>Types for working with 32 bytes hashes.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="ibc/index.html" title="anoma_tests::vp::vp_host_env::ibc mod">ibc</a></div><div class="item-right docblock-short"><p>Types that are used in IBC.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="intent/index.html" title="anoma_tests::vp::vp_host_env::intent mod">intent</a></div><div class="item-right docblock-short"><p>Vp imports and functions.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="internal/index.html" title="anoma_tests::vp::vp_host_env::internal mod">internal</a></div><div class="item-right docblock-short"><p>Shared internal types between the host env and guest (wasm).</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="key/index.html" title="anoma_tests::vp::vp_host_env::key mod">key</a></div><div class="item-right docblock-short"><p>Vp imports and functions.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="matchmaker/index.html" title="anoma_tests::vp::vp_host_env::matchmaker mod">matchmaker</a></div><div class="item-right docblock-short"><p>Matchmaker types</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="nft/index.html" title="anoma_tests::vp::vp_host_env::nft mod">nft</a></div><div class="item-right docblock-short"><p>A Nft validity predicate</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="parameters/index.html" title="anoma_tests::vp::vp_host_env::parameters mod">parameters</a></div><div class="item-right docblock-short"><p>Protocol parameters</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="proof_of_stake/index.html" title="anoma_tests::vp::vp_host_env::proof_of_stake mod">proof_of_stake</a></div><div class="item-right docblock-short"><p>Proof-of-Stake integration as a native validity predicate</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="storage/index.html" title="anoma_tests::vp::vp_host_env::storage mod">storage</a></div><div class="item-right docblock-short"><p>Storage types</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="time/index.html" title="anoma_tests::vp::vp_host_env::time mod">time</a></div><div class="item-right docblock-short"><p>Types for dealing with time and durations.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="token/index.html" title="anoma_tests::vp::vp_host_env::token mod">token</a></div><div class="item-right docblock-short"><p>Vp imports and functions.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="transaction/index.html" title="anoma_tests::vp::vp_host_env::transaction mod">transaction</a></div><div class="item-right docblock-short"><p>Types that are used in transactions.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="validity_predicate/index.html" title="anoma_tests::vp::vp_host_env::validity_predicate mod">validity_predicate</a></div><div class="item-right docblock-short"><p>Types that are used in validity predicates.</p>
</div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.BTreeSet.html" title="anoma_tests::vp::vp_host_env::BTreeSet struct">BTreeSet</a></div><div class="item-right docblock-short"><p>A set based on a B-Tree.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.HashSet.html" title="anoma_tests::vp::vp_host_env::HashSet struct">HashSet</a></div><div class="item-right docblock-short"><p>A <a href="https://doc.rust-lang.org/1.58.1/std/collections/index.html#use-the-set-variant-of-any-of-these-maps-when">hash set</a> implemented as a <code>HashMap</code> where the value is <code>()</code>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Key.html" title="anoma_tests::vp::vp_host_env::Key struct">Key</a></div><div class="item-right docblock-short"><p>A storage key is made of storage key segments <a href="storage/enum.DbKeySeg.html" title="DbKeySeg"><code>DbKeySeg</code></a>, separated by
<a href="storage/constant.KEY_SEGMENT_SEPARATOR.html" title="KEY_SEGMENT_SEPARATOR"><code>KEY_SEGMENT_SEPARATOR</code></a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.PostKeyValIterator.html" title="anoma_tests::vp::vp_host_env::PostKeyValIterator struct">PostKeyValIterator</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.PreKeyValIterator.html" title="anoma_tests::vp::vp_host_env::PreKeyValIterator struct">PreKeyValIterator</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Signed.html" title="anoma_tests::vp::vp_host_env::Signed struct">Signed</a></div><div class="item-right docblock-short"><p>A generic signed data wrapper for Borsh encode-able data.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.SignedTxData.html" title="anoma_tests::vp::vp_host_env::SignedTxData struct">SignedTxData</a></div><div class="item-right docblock-short"><p>This can be used to sign an arbitrary tx. The signature is produced and
verified on the tx data concatenated with the tx code, however the tx code
itself is not part of this structure.</p>
</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.Address.html" title="anoma_tests::vp::vp_host_env::Address enum">Address</a></div><div class="item-right docblock-short"><p>An account’s address</p>
</div></div></div><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.ENV.html" title="anoma_tests::vp::vp_host_env::ENV constant">ENV</a></div><div class="item-right docblock-short"><p>A <a href="../struct.TestVpEnv.html" title="TestVpEnv"><code>TestVpEnv</code></a> that can be used for VP host env functions calls
that implements the WASM host environment in native environment.</p>
</div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.BorshDeserialize.html" title="anoma_tests::vp::vp_host_env::BorshDeserialize trait">BorshDeserialize</a></div><div class="item-right docblock-short"><p>A data-structure that can be de-serialized from binary format by NBOR.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.BorshSerialize.html" title="anoma_tests::vp::vp_host_env::BorshSerialize trait">BorshSerialize</a></div><div class="item-right docblock-short"><p>A data-structure that can be serialized into binary format by NBOR.</p>
</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.eval.html" title="anoma_tests::vp::vp_host_env::eval fn">eval</a></div><div class="item-right docblock-short"><p>Evaluate a validity predicate with given data. The address, changed
storage keys and verifiers will have the same values as the input to
caller’s validity predicate.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.get_block_epoch.html" title="anoma_tests::vp::vp_host_env::get_block_epoch fn">get_block_epoch</a></div><div class="item-right docblock-short"><p>Get epoch of the current block</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.get_block_hash.html" title="anoma_tests::vp::vp_host_env::get_block_hash fn">get_block_hash</a></div><div class="item-right docblock-short"><p>Get a block hash</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.get_block_height.html" title="anoma_tests::vp::vp_host_env::get_block_height fn">get_block_height</a></div><div class="item-right docblock-short"><p>Get height of the current block</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.get_chain_id.html" title="anoma_tests::vp::vp_host_env::get_chain_id fn">get_chain_id</a></div><div class="item-right docblock-short"><p>Get the chain ID</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.get_tx_code_hash.html" title="anoma_tests::vp::vp_host_env::get_tx_code_hash fn">get_tx_code_hash</a></div><div class="item-right docblock-short"><p>Get a tx hash</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.has_key_post.html" title="anoma_tests::vp::vp_host_env::has_key_post fn">has_key_post</a></div><div class="item-right docblock-short"><p>Check if the given key is present in storage after transaction
execution.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.has_key_pre.html" title="anoma_tests::vp::vp_host_env::has_key_pre fn">has_key_pre</a></div><div class="item-right docblock-short"><p>Check if the given key was present in storage before transaction
execution.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.init.html" title="anoma_tests::vp::vp_host_env::init fn">init</a></div><div class="item-right docblock-short"><p>Initialize the VP environment in <a href="constant.ENV.html" title="ENV"><code>ENV</code></a>. This will be used in the
host env function calls via macro <code>native_host_fn!</code>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.init_from_tx.html" title="anoma_tests::vp::vp_host_env::init_from_tx fn">init_from_tx</a></div><div class="item-right docblock-short"><p>Initialize the VP host environment in <a href="constant.ENV.html" title="ENV"><code>ENV</code></a> by running a transaction.
The transaction is expected to modify the storage sub-space of the given
address <code>addr</code> or to add it to the set of verifiers using
<a href="../../tx/tx_host_env/fn.insert_verifier.html" title="tx_host_env::insert_verifier"><code>tx_host_env::insert_verifier</code></a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.iter_prefix_post.html" title="anoma_tests::vp::vp_host_env::iter_prefix_post fn">iter_prefix_post</a></div><div class="item-right docblock-short"><p>Get an iterator with the given prefix after transaction execution</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.iter_prefix_pre.html" title="anoma_tests::vp::vp_host_env::iter_prefix_pre fn">iter_prefix_pre</a></div><div class="item-right docblock-short"><p>Get an iterator with the given prefix before transaction execution</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.log_string.html" title="anoma_tests::vp::vp_host_env::log_string fn">log_string</a></div><div class="item-right docblock-short"><p>Log a string. The message will be printed at the <code>tracing::Level::Info</code>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.read_bytes_post.html" title="anoma_tests::vp::vp_host_env::read_bytes_post fn">read_bytes_post</a></div><div class="item-right docblock-short"><p>Try to read a variable-length value as bytes at the given key from
storage after transaction execution.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.read_bytes_pre.html" title="anoma_tests::vp::vp_host_env::read_bytes_pre fn">read_bytes_pre</a></div><div class="item-right docblock-short"><p>Try to read a variable-length value as bytesat the given key from
storage before transaction execution.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.read_bytes_temp.html" title="anoma_tests::vp::vp_host_env::read_bytes_temp fn">read_bytes_temp</a></div><div class="item-right docblock-short"><p>Try to read a variable-length value as bytes at the given key from
storage before transaction execution.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.read_post.html" title="anoma_tests::vp::vp_host_env::read_post fn">read_post</a></div><div class="item-right docblock-short"><p>Try to read a Borsh encoded variable-length value at the given key from
storage after transaction execution.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.read_pre.html" title="anoma_tests::vp::vp_host_env::read_pre fn">read_pre</a></div><div class="item-right docblock-short"><p>Try to read a Borsh encoded variable-length value at the given key from
storage before transaction execution.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.read_temp.html" title="anoma_tests::vp::vp_host_env::read_temp fn">read_temp</a></div><div class="item-right docblock-short"><p>Try to read a Borsh encoded variable-length value at the given key from
storage before transaction execution.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.set.html" title="anoma_tests::vp::vp_host_env::set fn">set</a></div><div class="item-right docblock-short"><p>Set the VP host environment in <a href="constant.ENV.html" title="ENV"><code>ENV</code></a> from the given <a href="../struct.TestVpEnv.html" title="TestVpEnv"><code>TestVpEnv</code></a>.
This will be used in the host env function calls via
macro <code>native_host_fn!</code>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.take.html" title="anoma_tests::vp::vp_host_env::take fn">take</a></div><div class="item-right docblock-short"><p>Take the <a href="../struct.TestVpEnv.html" title="TestVpEnv"><code>TestVpEnv</code></a> out of <a href="constant.ENV.html" title="ENV"><code>ENV</code></a>. The <a href="constant.ENV.html" title="ENV"><code>ENV</code></a> must be initialized.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.verify_tx_signature.html" title="anoma_tests::vp::vp_host_env::verify_tx_signature fn">verify_tx_signature</a></div><div class="item-right docblock-short"><p>Verify a transaction signature. The signature is expected to have been
produced on the encoded transaction <a href="../../../anoma/proto/types/struct.Tx.html" title="anoma::proto::Tx"><code>anoma::proto::Tx</code></a>
using <a href="../../../anoma/proto/types/struct.Tx.html#method.sign" title="anoma::proto::Tx::sign"><code>anoma::proto::Tx::sign</code></a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.with.html" title="anoma_tests::vp::vp_host_env::with fn">with</a></div><div class="item-right docblock-short"><p>Mutably borrow the <a href="../struct.TestVpEnv.html" title="TestVpEnv"><code>TestVpEnv</code></a> from <a href="constant.ENV.html" title="ENV"><code>ENV</code></a>. The <a href="constant.ENV.html" title="ENV"><code>ENV</code></a> must be
initialized.</p>
</div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.VpEval.html" title="anoma_tests::vp::vp_host_env::VpEval type">VpEval</a></div><div class="item-right docblock-short"></div></div></div><h2 id="attributes" class="small-section-header"><a href="#attributes">Attribute Macros</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="attr" href="attr.validity_predicate.html" title="anoma_tests::vp::vp_host_env::validity_predicate attr">validity_predicate</a></div><div class="item-right docblock-short"><p>Generate WASM binding for validity predicate main entrypoint function.</p>
</div></div></div><h2 id="derives" class="small-section-header"><a href="#derives">Derive Macros</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="derive" href="derive.BorshDeserialize.html" title="anoma_tests::vp::vp_host_env::BorshDeserialize derive">BorshDeserialize</a></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left module-item"><a class="derive" href="derive.BorshSerialize.html" title="anoma_tests::vp::vp_host_env::BorshSerialize derive">BorshSerialize</a></div><div class="item-right docblock-short"></div></div></div></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../../" data-current-crate="anoma_tests" data-search-index-js="../../../search-index.js" data-search-js="../../../search.js"></div>
</body></html>